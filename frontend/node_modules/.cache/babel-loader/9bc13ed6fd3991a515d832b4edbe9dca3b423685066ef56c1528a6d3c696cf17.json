{"ast":null,"code":"import { API_URL, STORAGE_KEYS } from '../constants';\n\n/**\r\n * Auth Service - Handles all authentication related API calls\r\n */\n\nexport const authService = {\n  /**\r\n   * Register a new user\r\n   */\n  register: async (fullName, username, password) => {\n    try {\n      const response = await fetch(`${API_URL}/register`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          full_name: fullName,\n          username,\n          password\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(typeof data.detail === 'string' ? data.detail : 'Registration failed');\n      }\n      return {\n        success: true,\n        data\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  },\n  /**\r\n   * Login user\r\n   */\n  login: async (username, password) => {\n    try {\n      const response = await fetch(`${API_URL}/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username,\n          password\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(typeof data.detail === 'string' ? data.detail : 'Login failed');\n      }\n\n      // Save JWT token\n      if (data.access_token) {\n        localStorage.setItem(STORAGE_KEYS.TOKEN, data.access_token);\n      }\n      return {\n        success: true,\n        data\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  },\n  /**\r\n   * Logout user\r\n   */\n  logout: () => {\n    localStorage.removeItem(STORAGE_KEYS.TOKEN);\n    localStorage.removeItem(STORAGE_KEYS.USER);\n  },\n  /**\r\n   * Get stored auth token\r\n   */\n  getToken: () => {\n    return localStorage.getItem(STORAGE_KEYS.TOKEN);\n  },\n  /**\r\n   * Check if user is authenticated\r\n   */\n  isAuthenticated: () => {\n    return !!localStorage.getItem(STORAGE_KEYS.TOKEN);\n  }\n};","map":{"version":3,"names":["API_URL","STORAGE_KEYS","authService","register","fullName","username","password","response","fetch","method","headers","body","JSON","stringify","full_name","data","json","ok","Error","detail","success","error","message","login","access_token","localStorage","setItem","TOKEN","logout","removeItem","USER","getToken","getItem","isAuthenticated"],"sources":["D:/REACT/collaborative-drawing-app/frontend/src/service/auth.js"],"sourcesContent":["import { API_URL, STORAGE_KEYS } from '../constants';\r\n\r\n/**\r\n * Auth Service - Handles all authentication related API calls\r\n */\r\n\r\nexport const authService = {\r\n  /**\r\n   * Register a new user\r\n   */\r\n  register: async (fullName, username, password) => {\r\n    try {\r\n      const response = await fetch(`${API_URL}/register`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ \r\n          full_name: fullName, \r\n          username, \r\n          password \r\n        })\r\n      });\r\n      \r\n      const data = await response.json();\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(typeof data.detail === 'string' ? data.detail : 'Registration failed');\r\n      }\r\n      \r\n      return { success: true, data };\r\n    } catch (error) {\r\n      return { success: false, error: error.message };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Login user\r\n   */\r\n  login: async (username, password) => {\r\n    try {\r\n      const response = await fetch(`${API_URL}/login`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ username, password })\r\n      });\r\n      \r\n      const data = await response.json();\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(typeof data.detail === 'string' ? data.detail : 'Login failed');\r\n      }\r\n      \r\n      // Save JWT token\r\n      if (data.access_token) {\r\n        localStorage.setItem(STORAGE_KEYS.TOKEN, data.access_token);\r\n      }\r\n      \r\n      return { success: true, data };\r\n    } catch (error) {\r\n      return { success: false, error: error.message };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Logout user\r\n   */\r\n  logout: () => {\r\n    localStorage.removeItem(STORAGE_KEYS.TOKEN);\r\n    localStorage.removeItem(STORAGE_KEYS.USER);\r\n  },\r\n\r\n  /**\r\n   * Get stored auth token\r\n   */\r\n  getToken: () => {\r\n    return localStorage.getItem(STORAGE_KEYS.TOKEN);\r\n  },\r\n\r\n  /**\r\n   * Check if user is authenticated\r\n   */\r\n  isAuthenticated: () => {\r\n    return !!localStorage.getItem(STORAGE_KEYS.TOKEN);\r\n  }\r\n};\r\n"],"mappings":"AAAA,SAASA,OAAO,EAAEC,YAAY,QAAQ,cAAc;;AAEpD;AACA;AACA;;AAEA,OAAO,MAAMC,WAAW,GAAG;EACzB;AACF;AACA;EACEC,QAAQ,EAAE,MAAAA,CAAOC,QAAQ,EAAEC,QAAQ,EAAEC,QAAQ,KAAK;IAChD,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGR,OAAO,WAAW,EAAE;QAClDS,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACnBC,SAAS,EAAEV,QAAQ;UACnBC,QAAQ;UACRC;QACF,CAAC;MACH,CAAC,CAAC;MAEF,MAAMS,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;MAElC,IAAI,CAACT,QAAQ,CAACU,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,OAAOH,IAAI,CAACI,MAAM,KAAK,QAAQ,GAAGJ,IAAI,CAACI,MAAM,GAAG,qBAAqB,CAAC;MACxF;MAEA,OAAO;QAAEC,OAAO,EAAE,IAAI;QAAEL;MAAK,CAAC;IAChC,CAAC,CAAC,OAAOM,KAAK,EAAE;MACd,OAAO;QAAED,OAAO,EAAE,KAAK;QAAEC,KAAK,EAAEA,KAAK,CAACC;MAAQ,CAAC;IACjD;EACF,CAAC;EAED;AACF;AACA;EACEC,KAAK,EAAE,MAAAA,CAAOlB,QAAQ,EAAEC,QAAQ,KAAK;IACnC,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGR,OAAO,QAAQ,EAAE;QAC/CS,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAER,QAAQ;UAAEC;QAAS,CAAC;MAC7C,CAAC,CAAC;MAEF,MAAMS,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;MAElC,IAAI,CAACT,QAAQ,CAACU,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,OAAOH,IAAI,CAACI,MAAM,KAAK,QAAQ,GAAGJ,IAAI,CAACI,MAAM,GAAG,cAAc,CAAC;MACjF;;MAEA;MACA,IAAIJ,IAAI,CAACS,YAAY,EAAE;QACrBC,YAAY,CAACC,OAAO,CAACzB,YAAY,CAAC0B,KAAK,EAAEZ,IAAI,CAACS,YAAY,CAAC;MAC7D;MAEA,OAAO;QAAEJ,OAAO,EAAE,IAAI;QAAEL;MAAK,CAAC;IAChC,CAAC,CAAC,OAAOM,KAAK,EAAE;MACd,OAAO;QAAED,OAAO,EAAE,KAAK;QAAEC,KAAK,EAAEA,KAAK,CAACC;MAAQ,CAAC;IACjD;EACF,CAAC;EAED;AACF;AACA;EACEM,MAAM,EAAEA,CAAA,KAAM;IACZH,YAAY,CAACI,UAAU,CAAC5B,YAAY,CAAC0B,KAAK,CAAC;IAC3CF,YAAY,CAACI,UAAU,CAAC5B,YAAY,CAAC6B,IAAI,CAAC;EAC5C,CAAC;EAED;AACF;AACA;EACEC,QAAQ,EAAEA,CAAA,KAAM;IACd,OAAON,YAAY,CAACO,OAAO,CAAC/B,YAAY,CAAC0B,KAAK,CAAC;EACjD,CAAC;EAED;AACF;AACA;EACEM,eAAe,EAAEA,CAAA,KAAM;IACrB,OAAO,CAAC,CAACR,YAAY,CAACO,OAAO,CAAC/B,YAAY,CAAC0B,KAAK,CAAC;EACnD;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}