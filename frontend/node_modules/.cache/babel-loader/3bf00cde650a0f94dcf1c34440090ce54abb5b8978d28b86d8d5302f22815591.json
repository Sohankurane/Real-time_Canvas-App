{"ast":null,"code":"var _jsxFileName = \"D:\\\\REACT\\\\collaborative-drawing-app\\\\frontend\\\\src\\\\components\\\\Canvas.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState, useContext } from 'react';\nimport { WebSocketContext } from '../context/WebSocketContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Canvas = () => {\n  _s();\n  const canvasRef = useRef(null);\n  const [drawing, setDrawing] = useState(false);\n  const [lastPosition, setLastPosition] = useState({\n    x: null,\n    y: null\n  });\n  const {\n    wsRef\n  } = useContext(WebSocketContext);\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    canvas.width = window.innerWidth * 0.8;\n    canvas.height = window.innerHeight * 0.6;\n    ctx.lineCap = 'round';\n    ctx.lineWidth = 3;\n    ctx.strokeStyle = '#000000';\n    const socket = wsRef.current;\n    const receive = event => {\n      const msg = JSON.parse(event.data);\n      if (msg.type === 'draw') {\n        ctx.beginPath();\n        ctx.moveTo(msg.fromX, msg.fromY);\n        ctx.lineTo(msg.toX, msg.toY);\n        ctx.strokeStyle = msg.color;\n        ctx.lineWidth = msg.thickness;\n        ctx.stroke();\n      }\n    };\n    if (socket) socket.addEventListener('message', receive);\n    return () => {\n      if (socket) socket.removeEventListener('message', receive);\n    };\n  }, [wsRef]);\n  const start = e => {\n    const {\n      offsetX,\n      offsetY\n    } = e.nativeEvent;\n    const ctx = canvasRef.current.getContext('2d');\n    ctx.beginPath();\n    ctx.moveTo(offsetX, offsetY);\n    setDrawing(true);\n    setLastPosition({\n      x: offsetX,\n      y: offsetY\n    });\n  };\n  const move = e => {\n    if (!drawing) return;\n    const {\n      offsetX,\n      offsetY\n    } = e.nativeEvent;\n    const ctx = canvasRef.current.getContext('2d');\n    ctx.lineTo(offsetX, offsetY);\n    ctx.stroke();\n    if (wsRef.current && wsRef.current.readyState === 1 && lastPosition.x !== null) {\n      wsRef.current.send(JSON.stringify({\n        type: 'draw',\n        fromX: lastPosition.x,\n        fromY: lastPosition.y,\n        toX: offsetX,\n        toY: offsetY,\n        color: ctx.strokeStyle,\n        thickness: ctx.lineWidth\n      }));\n    }\n    setLastPosition({\n      x: offsetX,\n      y: offsetY\n    });\n  };\n  const stop = () => {\n    setDrawing(false);\n    setLastPosition({\n      x: null,\n      y: null\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvasRef,\n    style: {\n      border: '1px solid #999',\n      background: '#fff',\n      borderRadius: '8px'\n    },\n    onMouseDown: start,\n    onMouseMove: move,\n    onMouseUp: stop,\n    onMouseLeave: stop\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n_s(Canvas, \"1GUNZ3S0k+ZYhNW6ScJ6xv0sKfU=\");\n_c = Canvas;\nexport default Canvas;\nvar _c;\n$RefreshReg$(_c, \"Canvas\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useContext","WebSocketContext","jsxDEV","_jsxDEV","Canvas","_s","canvasRef","drawing","setDrawing","lastPosition","setLastPosition","x","y","wsRef","canvas","current","ctx","getContext","width","window","innerWidth","height","innerHeight","lineCap","lineWidth","strokeStyle","socket","receive","event","msg","JSON","parse","data","type","beginPath","moveTo","fromX","fromY","lineTo","toX","toY","color","thickness","stroke","addEventListener","removeEventListener","start","e","offsetX","offsetY","nativeEvent","move","readyState","send","stringify","stop","ref","style","border","background","borderRadius","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/REACT/collaborative-drawing-app/frontend/src/components/Canvas.js"],"sourcesContent":["import React, { useRef, useEffect, useState, useContext } from 'react';\r\nimport { WebSocketContext } from '../context/WebSocketContext';\r\n\r\nconst Canvas = () => {\r\n  const canvasRef = useRef(null);\r\n  const [drawing, setDrawing] = useState(false);\r\n  const [lastPosition, setLastPosition] = useState({ x: null, y: null });\r\n  const { wsRef } = useContext(WebSocketContext);\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    const ctx = canvas.getContext('2d');\r\n    canvas.width = window.innerWidth * 0.8;\r\n    canvas.height = window.innerHeight * 0.6;\r\n    ctx.lineCap = 'round';\r\n    ctx.lineWidth = 3;\r\n    ctx.strokeStyle = '#000000';\r\n\r\n    const socket = wsRef.current;\r\n\r\n    const receive = event => {\r\n      const msg = JSON.parse(event.data);\r\n      if (msg.type === 'draw') {\r\n        ctx.beginPath();\r\n        ctx.moveTo(msg.fromX, msg.fromY);\r\n        ctx.lineTo(msg.toX, msg.toY);\r\n        ctx.strokeStyle = msg.color;\r\n        ctx.lineWidth = msg.thickness;\r\n        ctx.stroke();\r\n      }\r\n    };\r\n\r\n    if (socket) socket.addEventListener('message', receive);\r\n\r\n    return () => {\r\n      if (socket) socket.removeEventListener('message', receive);\r\n    };\r\n  }, [wsRef]);\r\n\r\n  const start = e => {\r\n    const { offsetX, offsetY } = e.nativeEvent;\r\n    const ctx = canvasRef.current.getContext('2d');\r\n    ctx.beginPath();\r\n    ctx.moveTo(offsetX, offsetY);\r\n    setDrawing(true);\r\n    setLastPosition({ x: offsetX, y: offsetY });\r\n  };\r\n\r\n  const move = e => {\r\n    if (!drawing) return;\r\n    const { offsetX, offsetY } = e.nativeEvent;\r\n    const ctx = canvasRef.current.getContext('2d');\r\n    ctx.lineTo(offsetX, offsetY);\r\n    ctx.stroke();\r\n\r\n    if (wsRef.current && wsRef.current.readyState === 1 && lastPosition.x !== null) {\r\n      wsRef.current.send(JSON.stringify({\r\n        type: 'draw',\r\n        fromX: lastPosition.x,\r\n        fromY: lastPosition.y,\r\n        toX: offsetX,\r\n        toY: offsetY,\r\n        color: ctx.strokeStyle,\r\n        thickness: ctx.lineWidth\r\n      }));\r\n    }\r\n    setLastPosition({ x: offsetX, y: offsetY });\r\n  };\r\n\r\n  const stop = () => {\r\n    setDrawing(false);\r\n    setLastPosition({ x: null, y: null });\r\n  };\r\n\r\n  return (\r\n    <canvas\r\n      ref={canvasRef}\r\n      style={{\r\n        border: '1px solid #999',\r\n        background: '#fff',\r\n        borderRadius: '8px'\r\n      }}\r\n      onMouseDown={start}\r\n      onMouseMove={move}\r\n      onMouseUp={stop}\r\n      onMouseLeave={stop}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Canvas;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}