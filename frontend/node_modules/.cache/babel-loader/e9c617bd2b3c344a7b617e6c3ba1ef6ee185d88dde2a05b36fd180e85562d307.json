{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\n\n/**\r\n * Custom hook for LiveCaptions component\r\n * Handles speech recognition and caption management\r\n */\nexport const useLiveCaptions = (username, isEnabled) => {\n  _s();\n  const [captions, setCaptions] = useState([]);\n  const [isListening, setIsListening] = useState(false);\n  const recognitionRef = useRef(null);\n  useEffect(() => {\n    if (!isEnabled) return;\n\n    // Check if browser supports Speech Recognition\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) {\n      console.warn('Speech Recognition API is not supported in this browser');\n      return;\n    }\n\n    // Initialize speech recognition\n    const recognition = new SpeechRecognition();\n    recognition.continuous = true;\n    recognition.interimResults = true;\n    recognition.lang = 'en-US';\n    recognition.onresult = event => {\n      let interimTranscript = '';\n      let finalTranscript = '';\n      for (let i = event.resultIndex; i < event.results.length; i++) {\n        const transcript = event.results[i][0].transcript;\n        if (event.results[i].isFinal) {\n          finalTranscript += transcript + ' ';\n        } else {\n          interimTranscript += transcript;\n        }\n      }\n      if (finalTranscript) {\n        setCaptions(prev => [...prev, {\n          username: username || 'You',\n          text: finalTranscript.trim(),\n          timestamp: new Date().toISOString()\n        }]);\n      }\n    };\n    recognition.onerror = event => {\n      console.error('Speech recognition error:', event.error);\n      if (event.error === 'no-speech') {\n        // Restart if no speech detected\n        if (isListening) {\n          recognition.start();\n        }\n      }\n    };\n    recognition.onend = () => {\n      // Restart if still listening\n      if (isListening) {\n        recognition.start();\n      }\n    };\n    recognitionRef.current = recognition;\n    return () => {\n      if (recognitionRef.current) {\n        recognitionRef.current.stop();\n      }\n    };\n  }, [isEnabled, username, isListening]);\n  const toggleListening = () => {\n    if (!recognitionRef.current) {\n      alert('Speech recognition is not supported in your browser');\n      return;\n    }\n    if (isListening) {\n      recognitionRef.current.stop();\n      setIsListening(false);\n    } else {\n      try {\n        recognitionRef.current.start();\n        setIsListening(true);\n      } catch (error) {\n        console.error('Error starting speech recognition:', error);\n      }\n    }\n  };\n  return {\n    captions,\n    isListening,\n    toggleListening\n  };\n};\n_s(useLiveCaptions, \"ldk7BdpAf2bSptowdUyydcKcjwU=\");","map":{"version":3,"names":["useState","useEffect","useRef","useLiveCaptions","username","isEnabled","_s","captions","setCaptions","isListening","setIsListening","recognitionRef","SpeechRecognition","window","webkitSpeechRecognition","console","warn","recognition","continuous","interimResults","lang","onresult","event","interimTranscript","finalTranscript","i","resultIndex","results","length","transcript","isFinal","prev","text","trim","timestamp","Date","toISOString","onerror","error","start","onend","current","stop","toggleListening","alert"],"sources":["D:/REACT/collaborative-drawing-app/frontend/src/components/LiveCaptions/LiveCaptions.hook.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\r\n\r\n/**\r\n * Custom hook for LiveCaptions component\r\n * Handles speech recognition and caption management\r\n */\r\nexport const useLiveCaptions = (username, isEnabled) => {\r\n  const [captions, setCaptions] = useState([]);\r\n  const [isListening, setIsListening] = useState(false);\r\n  const recognitionRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!isEnabled) return;\r\n\r\n    // Check if browser supports Speech Recognition\r\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n    \r\n    if (!SpeechRecognition) {\r\n      console.warn('Speech Recognition API is not supported in this browser');\r\n      return;\r\n    }\r\n\r\n    // Initialize speech recognition\r\n    const recognition = new SpeechRecognition();\r\n    recognition.continuous = true;\r\n    recognition.interimResults = true;\r\n    recognition.lang = 'en-US';\r\n\r\n    recognition.onresult = (event) => {\r\n      let interimTranscript = '';\r\n      let finalTranscript = '';\r\n\r\n      for (let i = event.resultIndex; i < event.results.length; i++) {\r\n        const transcript = event.results[i][0].transcript;\r\n        if (event.results[i].isFinal) {\r\n          finalTranscript += transcript + ' ';\r\n        } else {\r\n          interimTranscript += transcript;\r\n        }\r\n      }\r\n\r\n      if (finalTranscript) {\r\n        setCaptions(prev => [\r\n          ...prev,\r\n          {\r\n            username: username || 'You',\r\n            text: finalTranscript.trim(),\r\n            timestamp: new Date().toISOString()\r\n          }\r\n        ]);\r\n      }\r\n    };\r\n\r\n    recognition.onerror = (event) => {\r\n      console.error('Speech recognition error:', event.error);\r\n      if (event.error === 'no-speech') {\r\n        // Restart if no speech detected\r\n        if (isListening) {\r\n          recognition.start();\r\n        }\r\n      }\r\n    };\r\n\r\n    recognition.onend = () => {\r\n      // Restart if still listening\r\n      if (isListening) {\r\n        recognition.start();\r\n      }\r\n    };\r\n\r\n    recognitionRef.current = recognition;\r\n\r\n    return () => {\r\n      if (recognitionRef.current) {\r\n        recognitionRef.current.stop();\r\n      }\r\n    };\r\n  }, [isEnabled, username, isListening]);\r\n\r\n  const toggleListening = () => {\r\n    if (!recognitionRef.current) {\r\n      alert('Speech recognition is not supported in your browser');\r\n      return;\r\n    }\r\n\r\n    if (isListening) {\r\n      recognitionRef.current.stop();\r\n      setIsListening(false);\r\n    } else {\r\n      try {\r\n        recognitionRef.current.start();\r\n        setIsListening(true);\r\n      } catch (error) {\r\n        console.error('Error starting speech recognition:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  return {\r\n    captions,\r\n    isListening,\r\n    toggleListening\r\n  };\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}