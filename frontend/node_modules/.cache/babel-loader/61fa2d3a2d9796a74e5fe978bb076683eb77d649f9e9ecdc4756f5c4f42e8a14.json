{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import\"./RoomList.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function RoomList(_ref){let{user,onJoinRoom}=_ref;const[rooms,setRooms]=useState([]);const[newRoom,setNewRoom]=useState(\"\");const[error,setError]=useState(\"\");const[success,setSuccess]=useState(\"\");useEffect(()=>{fetch(\"http://localhost:8000/rooms\",{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}}).then(res=>res.json()).then(data=>{setRooms(data.rooms);}).catch(()=>setError(\"Failed to load rooms.\"));},[]);const handleCreateRoom=async()=>{if(!newRoom.trim()){setError(\"Room name cannot be empty.\");setSuccess(\"\");return;}setError(\"\");try{const resp=await fetch(\"http://localhost:8000/rooms\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))},body:JSON.stringify({room:newRoom.trim()})});const data=await resp.json();if(resp.ok){setRooms([...rooms,{name:newRoom.trim(),admin_username:user.username}]);setSuccess(\"Room created successfully!\");setNewRoom(\"\");}else{setError(data.detail||\"Failed to create room.\");setSuccess(\"\");}}catch(_unused){setError(\"Network error while creating room.\");setSuccess(\"\");}};const handleDeleteRoom=async roomName=>{if(!window.confirm(\"Are you sure you want to delete room \\\"\".concat(roomName,\"\\\"?\")))return;try{const resp=await fetch(\"http://localhost:8000/rooms/\".concat(roomName),{method:\"DELETE\",headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}});if(resp.ok){setRooms(rooms.filter(room=>room.name!==roomName));}else{setError(\"Failed to delete room.\");}}catch(_unused2){setError(\"Network error while deleting room.\");}};const handleJoinRoom=(roomName,admin_username)=>{if(onJoinRoom){onJoinRoom({name:roomName,admin_username});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"roomlist-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"roomlist-title\",children:\"Available Rooms\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"success-message\",children:success}),/*#__PURE__*/_jsx(\"ul\",{className:\"roomlist-list\",role:\"list\",children:rooms.map(_ref2=>{let{name,admin_username}=_ref2;return/*#__PURE__*/_jsxs(\"li\",{className:\"roomlist-item \".concat(admin_username===user.username?\"admin-room\":\"\"),tabIndex:0,role:\"listitem\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"roomlist-room\",children:name}),/*#__PURE__*/_jsxs(\"span\",{className:\"roomlist-admin-username\",children:[\" (Admin: \",admin_username,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"roomlist-join-btn\",onClick:()=>handleJoinRoom(name,admin_username),children:\"Join\"}),admin_username===user.username&&/*#__PURE__*/_jsx(\"button\",{className:\"roomlist-delete-btn red-delete\",onClick:()=>handleDeleteRoom(name),children:\"Delete\"})]})]},name);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"roomlist-create\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"roomlist-input\",type:\"text\",placeholder:\"Enter new room name\",value:newRoom,\"aria-label\":\"New room name\",onChange:e=>setNewRoom(e.target.value),onKeyDown:e=>e.key===\"Enter\"&&handleCreateRoom()}),/*#__PURE__*/_jsx(\"button\",{className:\"roomlist-create-btn\",onClick:handleCreateRoom,children:\"Create Room\"})]})]});}export default RoomList;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","RoomList","_ref","user","onJoinRoom","rooms","setRooms","newRoom","setNewRoom","error","setError","success","setSuccess","fetch","headers","Authorization","concat","localStorage","getItem","then","res","json","data","catch","handleCreateRoom","trim","resp","method","body","JSON","stringify","room","ok","name","admin_username","username","detail","_unused","handleDeleteRoom","roomName","window","confirm","filter","_unused2","handleJoinRoom","className","children","role","map","_ref2","tabIndex","onClick","type","placeholder","value","onChange","e","target","onKeyDown","key"],"sources":["D:/REACT/collaborative-drawing-app/frontend/src/components/RoomList.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./RoomList.css\";\r\n\r\nfunction RoomList({ user, onJoinRoom }) {\r\n  const [rooms, setRooms] = useState([]);\r\n  const [newRoom, setNewRoom] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setSuccess] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:8000/rooms\", {\r\n      headers: {\r\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        setRooms(data.rooms);\r\n      })\r\n      .catch(() => setError(\"Failed to load rooms.\"));\r\n  }, []);\r\n\r\n  const handleCreateRoom = async () => {\r\n    if (!newRoom.trim()) {\r\n      setError(\"Room name cannot be empty.\");\r\n      setSuccess(\"\");\r\n      return;\r\n    }\r\n    setError(\"\");\r\n    try {\r\n      const resp = await fetch(\"http://localhost:8000/rooms\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n        },\r\n        body: JSON.stringify({ room: newRoom.trim() }),\r\n      });\r\n      const data = await resp.json();\r\n      if (resp.ok) {\r\n        setRooms([...rooms, { name: newRoom.trim(), admin_username: user.username }]);\r\n        setSuccess(\"Room created successfully!\");\r\n        setNewRoom(\"\");\r\n      } else {\r\n        setError(data.detail || \"Failed to create room.\");\r\n        setSuccess(\"\");\r\n      }\r\n    } catch {\r\n      setError(\"Network error while creating room.\");\r\n      setSuccess(\"\");\r\n    }\r\n  };\r\n\r\n  const handleDeleteRoom = async (roomName) => {\r\n    if (!window.confirm(`Are you sure you want to delete room \"${roomName}\"?`)) return;\r\n    try {\r\n      const resp = await fetch(`http://localhost:8000/rooms/${roomName}`, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n        },\r\n      });\r\n      if (resp.ok) {\r\n        setRooms(rooms.filter((room) => room.name !== roomName));\r\n      } else {\r\n        setError(\"Failed to delete room.\");\r\n      }\r\n    } catch {\r\n      setError(\"Network error while deleting room.\");\r\n    }\r\n  };\r\n\r\n  const handleJoinRoom = (roomName, admin_username) => {\r\n    if (onJoinRoom) {\r\n      onJoinRoom({ name: roomName, admin_username });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"roomlist-container\">\r\n      <h2 className=\"roomlist-title\">Available Rooms</h2>\r\n\r\n      {error && <div className=\"error-message\">{error}</div>}\r\n      {success && <div className=\"success-message\">{success}</div>}\r\n\r\n      <ul className=\"roomlist-list\" role=\"list\">\r\n        {rooms.map(({ name, admin_username }) => (\r\n          <li\r\n            key={name}\r\n            className={`roomlist-item ${admin_username === user.username ? \"admin-room\" : \"\"}`}\r\n            tabIndex={0}\r\n            role=\"listitem\"\r\n          >\r\n            <div>\r\n              <span className=\"roomlist-room\">{name}</span>\r\n              <span className=\"roomlist-admin-username\"> (Admin: {admin_username})</span>\r\n            </div>\r\n            <div>\r\n              <button\r\n                className=\"roomlist-join-btn\"\r\n                onClick={() => handleJoinRoom(name, admin_username)}\r\n              >\r\n                Join\r\n              </button>\r\n              {admin_username === user.username && (\r\n                <button\r\n                  className=\"roomlist-delete-btn red-delete\"\r\n                  onClick={() => handleDeleteRoom(name)}\r\n                >\r\n                  Delete\r\n                </button>\r\n              )}\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n\r\n      <div className=\"roomlist-create\">\r\n        <input\r\n          className=\"roomlist-input\"\r\n          type=\"text\"\r\n          placeholder=\"Enter new room name\"\r\n          value={newRoom}\r\n          aria-label=\"New room name\"\r\n          onChange={(e) => setNewRoom(e.target.value)}\r\n          onKeyDown={(e) => e.key === \"Enter\" && handleCreateRoom()}\r\n        />\r\n        <button className=\"roomlist-create-btn\" onClick={handleCreateRoom}>\r\n          Create Room\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RoomList;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExB,QAAS,CAAAC,QAAQA,CAAAC,IAAA,CAAuB,IAAtB,CAAEC,IAAI,CAAEC,UAAW,CAAC,CAAAF,IAAA,CACpC,KAAM,CAACG,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAE1CC,SAAS,CAAC,IAAM,CACdiB,KAAK,CAAC,6BAA6B,CAAE,CACnCC,OAAO,CAAE,CACPC,aAAa,WAAAC,MAAA,CAAYC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACxD,CACF,CAAC,CAAC,CACCC,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,IAAI,EAAK,CACdhB,QAAQ,CAACgB,IAAI,CAACjB,KAAK,CAAC,CACtB,CAAC,CAAC,CACDkB,KAAK,CAAC,IAAMb,QAAQ,CAAC,uBAAuB,CAAC,CAAC,CACnD,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAc,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAI,CAACjB,OAAO,CAACkB,IAAI,CAAC,CAAC,CAAE,CACnBf,QAAQ,CAAC,4BAA4B,CAAC,CACtCE,UAAU,CAAC,EAAE,CAAC,CACd,OACF,CACAF,QAAQ,CAAC,EAAE,CAAC,CACZ,GAAI,CACF,KAAM,CAAAgB,IAAI,CAAG,KAAM,CAAAb,KAAK,CAAC,6BAA6B,CAAE,CACtDc,MAAM,CAAE,MAAM,CACdb,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,WAAAC,MAAA,CAAYC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACxD,CAAC,CACDU,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,IAAI,CAAExB,OAAO,CAACkB,IAAI,CAAC,CAAE,CAAC,CAC/C,CAAC,CAAC,CACF,KAAM,CAAAH,IAAI,CAAG,KAAM,CAAAI,IAAI,CAACL,IAAI,CAAC,CAAC,CAC9B,GAAIK,IAAI,CAACM,EAAE,CAAE,CACX1B,QAAQ,CAAC,CAAC,GAAGD,KAAK,CAAE,CAAE4B,IAAI,CAAE1B,OAAO,CAACkB,IAAI,CAAC,CAAC,CAAES,cAAc,CAAE/B,IAAI,CAACgC,QAAS,CAAC,CAAC,CAAC,CAC7EvB,UAAU,CAAC,4BAA4B,CAAC,CACxCJ,UAAU,CAAC,EAAE,CAAC,CAChB,CAAC,IAAM,CACLE,QAAQ,CAACY,IAAI,CAACc,MAAM,EAAI,wBAAwB,CAAC,CACjDxB,UAAU,CAAC,EAAE,CAAC,CAChB,CACF,CAAE,MAAAyB,OAAA,CAAM,CACN3B,QAAQ,CAAC,oCAAoC,CAAC,CAC9CE,UAAU,CAAC,EAAE,CAAC,CAChB,CACF,CAAC,CAED,KAAM,CAAA0B,gBAAgB,CAAG,KAAO,CAAAC,QAAQ,EAAK,CAC3C,GAAI,CAACC,MAAM,CAACC,OAAO,2CAAAzB,MAAA,CAA0CuB,QAAQ,OAAI,CAAC,CAAE,OAC5E,GAAI,CACF,KAAM,CAAAb,IAAI,CAAG,KAAM,CAAAb,KAAK,gCAAAG,MAAA,CAAgCuB,QAAQ,EAAI,CAClEZ,MAAM,CAAE,QAAQ,CAChBb,OAAO,CAAE,CACPC,aAAa,WAAAC,MAAA,CAAYC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACxD,CACF,CAAC,CAAC,CACF,GAAIQ,IAAI,CAACM,EAAE,CAAE,CACX1B,QAAQ,CAACD,KAAK,CAACqC,MAAM,CAAEX,IAAI,EAAKA,IAAI,CAACE,IAAI,GAAKM,QAAQ,CAAC,CAAC,CAC1D,CAAC,IAAM,CACL7B,QAAQ,CAAC,wBAAwB,CAAC,CACpC,CACF,CAAE,MAAAiC,QAAA,CAAM,CACNjC,QAAQ,CAAC,oCAAoC,CAAC,CAChD,CACF,CAAC,CAED,KAAM,CAAAkC,cAAc,CAAGA,CAACL,QAAQ,CAAEL,cAAc,GAAK,CACnD,GAAI9B,UAAU,CAAE,CACdA,UAAU,CAAC,CAAE6B,IAAI,CAAEM,QAAQ,CAAEL,cAAe,CAAC,CAAC,CAChD,CACF,CAAC,CAED,mBACElC,KAAA,QAAK6C,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjChD,IAAA,OAAI+C,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAC,iBAAe,CAAI,CAAC,CAElDrC,KAAK,eAAIX,IAAA,QAAK+C,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAErC,KAAK,CAAM,CAAC,CACrDE,OAAO,eAAIb,IAAA,QAAK+C,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAEnC,OAAO,CAAM,CAAC,cAE5Db,IAAA,OAAI+C,SAAS,CAAC,eAAe,CAACE,IAAI,CAAC,MAAM,CAAAD,QAAA,CACtCzC,KAAK,CAAC2C,GAAG,CAACC,KAAA,MAAC,CAAEhB,IAAI,CAAEC,cAAe,CAAC,CAAAe,KAAA,oBAClCjD,KAAA,OAEE6C,SAAS,kBAAA7B,MAAA,CAAmBkB,cAAc,GAAK/B,IAAI,CAACgC,QAAQ,CAAG,YAAY,CAAG,EAAE,CAAG,CACnFe,QAAQ,CAAE,CAAE,CACZH,IAAI,CAAC,UAAU,CAAAD,QAAA,eAEf9C,KAAA,QAAA8C,QAAA,eACEhD,IAAA,SAAM+C,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEb,IAAI,CAAO,CAAC,cAC7CjC,KAAA,SAAM6C,SAAS,CAAC,yBAAyB,CAAAC,QAAA,EAAC,WAAS,CAACZ,cAAc,CAAC,GAAC,EAAM,CAAC,EACxE,CAAC,cACNlC,KAAA,QAAA8C,QAAA,eACEhD,IAAA,WACE+C,SAAS,CAAC,mBAAmB,CAC7BM,OAAO,CAAEA,CAAA,GAAMP,cAAc,CAACX,IAAI,CAAEC,cAAc,CAAE,CAAAY,QAAA,CACrD,MAED,CAAQ,CAAC,CACRZ,cAAc,GAAK/B,IAAI,CAACgC,QAAQ,eAC/BrC,IAAA,WACE+C,SAAS,CAAC,gCAAgC,CAC1CM,OAAO,CAAEA,CAAA,GAAMb,gBAAgB,CAACL,IAAI,CAAE,CAAAa,QAAA,CACvC,QAED,CAAQ,CACT,EACE,CAAC,GAxBDb,IAyBH,CAAC,EACN,CAAC,CACA,CAAC,cAELjC,KAAA,QAAK6C,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BhD,IAAA,UACE+C,SAAS,CAAC,gBAAgB,CAC1BO,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,qBAAqB,CACjCC,KAAK,CAAE/C,OAAQ,CACf,aAAW,eAAe,CAC1BgD,QAAQ,CAAGC,CAAC,EAAKhD,UAAU,CAACgD,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC5CI,SAAS,CAAGF,CAAC,EAAKA,CAAC,CAACG,GAAG,GAAK,OAAO,EAAInC,gBAAgB,CAAC,CAAE,CAC3D,CAAC,cACF1B,IAAA,WAAQ+C,SAAS,CAAC,qBAAqB,CAACM,OAAO,CAAE3B,gBAAiB,CAAAsB,QAAA,CAAC,aAEnE,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAA7C,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}