{"ast":null,"code":"import { WS_URL, STORAGE_KEYS } from '../constants';\n\n/**\r\n * WebSocket Service - Handles WebSocket connection management\r\n */\n\nexport const websocketService = {\n  /**\r\n   * Create WebSocket connection URL with authentication\r\n   */\n  getWebSocketUrl: roomId => {\n    const token = localStorage.getItem(STORAGE_KEYS.TOKEN);\n    if (!token) {\n      throw new Error('No authentication token found');\n    }\n    return `${WS_URL}/ws/${roomId}?token=${token}`;\n  },\n  /**\r\n   * Send message through WebSocket\r\n   */\n  sendMessage: (ws, message) => {\n    if (ws && ws.readyState === WebSocket.OPEN) {\n      const messageStr = typeof message === 'string' ? message : JSON.stringify(message);\n      ws.send(messageStr);\n      return true;\n    }\n    console.warn('WebSocket is not open. Message not sent:', message);\n    return false;\n  },\n  /**\r\n   * Parse incoming WebSocket message\r\n   */\n  parseMessage: message => {\n    try {\n      return JSON.parse(message);\n    } catch (error) {\n      console.error('Failed to parse WebSocket message:', error);\n      return null;\n    }\n  }\n};","map":{"version":3,"names":["WS_URL","STORAGE_KEYS","websocketService","getWebSocketUrl","roomId","token","localStorage","getItem","TOKEN","Error","sendMessage","ws","message","readyState","WebSocket","OPEN","messageStr","JSON","stringify","send","console","warn","parseMessage","parse","error"],"sources":["D:/REACT/collaborative-drawing-app/frontend/src/service/websocket.js"],"sourcesContent":["import { WS_URL, STORAGE_KEYS } from '../constants';\r\n\r\n/**\r\n * WebSocket Service - Handles WebSocket connection management\r\n */\r\n\r\nexport const websocketService = {\r\n  /**\r\n   * Create WebSocket connection URL with authentication\r\n   */\r\n  getWebSocketUrl: (roomId) => {\r\n    const token = localStorage.getItem(STORAGE_KEYS.TOKEN);\r\n    if (!token) {\r\n      throw new Error('No authentication token found');\r\n    }\r\n    return `${WS_URL}/ws/${roomId}?token=${token}`;\r\n  },\r\n\r\n  /**\r\n   * Send message through WebSocket\r\n   */\r\n  sendMessage: (ws, message) => {\r\n    if (ws && ws.readyState === WebSocket.OPEN) {\r\n      const messageStr = typeof message === 'string' ? message : JSON.stringify(message);\r\n      ws.send(messageStr);\r\n      return true;\r\n    }\r\n    console.warn('WebSocket is not open. Message not sent:', message);\r\n    return false;\r\n  },\r\n\r\n  /**\r\n   * Parse incoming WebSocket message\r\n   */\r\n  parseMessage: (message) => {\r\n    try {\r\n      return JSON.parse(message);\r\n    } catch (error) {\r\n      console.error('Failed to parse WebSocket message:', error);\r\n      return null;\r\n    }\r\n  }\r\n};\r\n"],"mappings":"AAAA,SAASA,MAAM,EAAEC,YAAY,QAAQ,cAAc;;AAEnD;AACA;AACA;;AAEA,OAAO,MAAMC,gBAAgB,GAAG;EAC9B;AACF;AACA;EACEC,eAAe,EAAGC,MAAM,IAAK;IAC3B,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAACN,YAAY,CAACO,KAAK,CAAC;IACtD,IAAI,CAACH,KAAK,EAAE;MACV,MAAM,IAAII,KAAK,CAAC,+BAA+B,CAAC;IAClD;IACA,OAAO,GAAGT,MAAM,OAAOI,MAAM,UAAUC,KAAK,EAAE;EAChD,CAAC;EAED;AACF;AACA;EACEK,WAAW,EAAEA,CAACC,EAAE,EAAEC,OAAO,KAAK;IAC5B,IAAID,EAAE,IAAIA,EAAE,CAACE,UAAU,KAAKC,SAAS,CAACC,IAAI,EAAE;MAC1C,MAAMC,UAAU,GAAG,OAAOJ,OAAO,KAAK,QAAQ,GAAGA,OAAO,GAAGK,IAAI,CAACC,SAAS,CAACN,OAAO,CAAC;MAClFD,EAAE,CAACQ,IAAI,CAACH,UAAU,CAAC;MACnB,OAAO,IAAI;IACb;IACAI,OAAO,CAACC,IAAI,CAAC,0CAA0C,EAAET,OAAO,CAAC;IACjE,OAAO,KAAK;EACd,CAAC;EAED;AACF;AACA;EACEU,YAAY,EAAGV,OAAO,IAAK;IACzB,IAAI;MACF,OAAOK,IAAI,CAACM,KAAK,CAACX,OAAO,CAAC;IAC5B,CAAC,CAAC,OAAOY,KAAK,EAAE;MACdJ,OAAO,CAACI,KAAK,CAAC,oCAAoC,EAAEA,KAAK,CAAC;MAC1D,OAAO,IAAI;IACb;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}